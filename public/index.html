<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Mr.FLEN’s Music Finder</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" type="image/png" sizes="192x192" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTaF4gcqMi2_jDFJv-rNCvSR7LdGeumndQkew&s">
  <style>
:root {
  --bg-0:#0b1017; --panel:rgba(18,24,33,.72); --blur:16px;
  --text:#e6eefc; --muted:#98a2b3; --brand:#2f81f7; --accent:#8b5cf6;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
}

html,body {height:100%; margin:0; color:var(--text); background:var(--bg-0);}
#bg-video{
  position:fixed; top:0; left:0;
  min-width:100%; min-height:100%;
  width:auto; height:auto;
  z-index:-2; object-fit:cover;
}
body::before{
  content:""; position:fixed; inset:0;
  background:linear-gradient(to bottom, rgba(7,10,14,.6), rgba(7,10,14,.92));
  z-index:-1;
}
.topbar{display:flex; gap:16px; align-items:center; padding:12px 20px;}
.brand{font-weight:700; letter-spacing:.5px;}
.search input{width:min(56vw,520px); padding:10px 14px; border-radius:12px; border:1px solid #223; background:#101624; color:var(--text);}
.btn{background:#122033; color:var(--text); border:1px solid #24344a; padding:10px 14px; border-radius:12px; cursor:pointer;}
.btn:disabled{opacity:.5; cursor:not-allowed;}
.btn.loading{position:relative; pointer-events:none;}
.btn.loading::after{content:""; position:absolute; right:12px; top:50%; width:16px; height:16px; margin-top:-8px; border:2px solid currentColor; border-top-color:transparent; border-radius:50%; animation:spin 1s linear infinite;}
.btn.secondary{background:transparent; border-color:var(--brand); color:var(--brand);}
.palette{position:fixed; inset:0; background:rgba(0,0,0,.6); display:flex; align-items:center; justify-content:center; z-index:1000;}
.palette.hidden{display:none;}
.palette-box{background:var(--panel); backdrop-filter:blur(var(--blur)); padding:16px; border-radius:var(--radius); box-shadow:var(--shadow); min-width:280px; max-width:90%;}
.palette-box input,.palette-box select{width:100%; padding:10px; border-radius:8px; border:1px solid #24344a; background:#101624; color:var(--text);}
.palette-box ul{list-style:none; margin:8px 0 0; padding:0; max-height:160px; overflow:auto;}
.palette-box li{padding:6px 8px; border-radius:6px; cursor:pointer;}
.palette-box li:hover{background:rgba(255,255,255,.08);}
.panel{background:var(--panel); backdrop-filter: blur(var(--blur)); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; border:1px solid rgba(255,255,255,.05);}
.grid{display:grid; gap:16px; grid-template-columns: 1.5fr 2fr 1.2fr; padding:16px; align-items:start;}
.list{list-style:none; margin:0; padding:0;}
.list li{display:flex; align-items:center; gap:12px; padding:10px; border-radius:12px;}
.list li:hover{background:rgba(255,255,255,.04);}
.badge{margin-left:auto; font-size:12px; opacity:.8}
.track-actions{display:flex; gap:8px;}
.player{position:sticky; bottom:0; display:flex; justify-content:space-between; gap:16px;
  background:rgba(10,14,20,.92); padding:10px 14px; border-top:1px solid #223; }
.np-meta{display:flex; gap:12px; align-items:center;}
.art{width:40px; height:40px; border-radius:8px; object-fit:cover;}
.title{font-weight:600} .muted, .artist{color:var(--muted)}
.trending{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:12px;margin-top:16px;}
.trending img{width:80px;height:80px;border-radius:12px;object-fit:cover;}
.analytics{grid-column:3;}
.stats{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px;}
.stats li{display:flex;justify-content:space-between;padding:10px 14px;border-radius:12px;background:rgba(255,255,255,.04);}
.stats li span:last-child{font-weight:600;}
.social{grid-column:3;}
.social-links{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px;}
.social-links a{display:block;padding:10px 14px;border-radius:12px;background:rgba(255,255,255,.04);color:var(--text);text-decoration:none;}
.social-links a:hover{background:rgba(255,255,255,.06);}
.status{margin-top:8px;min-height:1.5em;color:var(--muted);font-size:14px;}
*:focus-visible{outline:2px solid var(--brand); outline-offset:2px;}
@keyframes spin{to{transform:rotate(360deg);}}
@media (max-width: 960px){
  .grid{grid-template-columns:1fr; padding-bottom:88px}
  .library{order:3}
  .analytics{order:4}
  .social{order:5}

}
  </style>
  <meta name="theme-color" content="#0b1017">
</head>
<body>
  <video id="bg-video" autoplay muted loop playsinline aria-hidden="true"></video>
  <header class="topbar">
    <button id="openPalette" class="btn" aria-label="Command palette (Ctrl/⌘K)">⌘K</button>
    <div class="brand">Mr.FLEN’s</div>
    <div class="search">
      <input id="q" type="search" placeholder="Search for music…" aria-label="Search for music" autocomplete="off" />
      <button id="searchBtn" class="btn">Search</button>
    </div>
    <nav class="actions">
      <button id="connectSC" class="btn sc">Connect with SoundCloud</button>
      <button id="libraryBtn" class="btn">Library</button>
      <button id="settingsBtn" class="icon" aria-label="Settings">⚙️</button>
    </nav>
  </header>

  <div id="palette" class="palette hidden" role="dialog" aria-modal="true">
    <div class="palette-box">
      <input id="paletteInput" type="text" placeholder="Type a search..." aria-label="Command palette input" />
      <ul id="paletteList"></ul>
    </div>
  </div>

  <div id="settingsModal" class="palette hidden" role="dialog" aria-modal="true">
    <div class="palette-box">
      <label style="display:flex;align-items:center;gap:8px;">
        <input id="mrflensOnly" type="checkbox" checked />
        Show only Mr.FLEN
      </label>
      <label style="display:block;margin-top:12px;">
        Sort by
        <select id="sortSelect">
          <option value="title">Title</option>
          <option value="duration">Duration</option>
        </select>
      </label>
      <button id="closeSettings" class="btn" style="margin-top:16px;">Close</button>
    </div>
  </div>

  <main class="grid">
    <section class="panel hero" aria-labelledby="heroTitle">
      <h1 id="heroTitle">Midnight Vibes</h1>
      <p class="muted">Mr. FLEN</p>
      <div class="trending" id="trending"></div>
    </section>

    <section class="panel results" aria-labelledby="resultsTitle">
      <div class="tabs">
        <button class="tab active" data-tab="tracks">Tracks (Mr.FLEN)</button>
        <button class="tab" data-tab="artists">Artists</button>
        <button class="tab" data-tab="playlists">Playlists</button>
        <button class="tab" data-tab="all">All</button>
      </div>
      <div id="status" class="status" role="status" aria-live="polite"></div>
      <ul id="resultsList" class="list"></ul>
    </section>

    <aside class="panel library" aria-label="Library">
      <div class="tabs">
        <button class="tab active" data-tab="my">My Tracks</button>
        <button class="tab" data-tab="likes">Liked Tracks</button>
        <button class="tab" data-tab="reposts">Reposts</button>
      </div>
      <ul id="libraryList" class="list"></ul>
    </aside>

    <aside class="panel analytics" aria-label="Analytics">
      <h2>Analytics</h2>
      <ul class="stats">
        <li><span>Likes</span><span id="likesCount">0</span></li>
        <li><span>Reposts</span><span id="repostsCount">0</span></li>
        <li><span>Followers</span><span id="followersCount">0</span></li>
      </ul>
    </aside>

    <aside class="panel social" aria-label="Connect">
      <h2>Connect</h2>
      <ul class="social-links">
        <li><a href="https://audius.co/Mr.FLEN" target="_blank" rel="noopener">Audius</a></li>
        <li><a href="https://soundcloud.com/mr-flen" target="_blank" rel="noopener">SoundCloud</a></li>
        <li><a href="https://twitter.com/mrflen" target="_blank" rel="noopener">Twitter</a></li>

      </ul>
    </aside>
  </main>

  <footer class="player" aria-label="Now Playing">
    <div class="np-meta">
      <img id="npArt" class="art" alt="" />
      <div>
        <div id="npTitle" class="title">Nothing playing</div>
        <div id="npArtist" class="artist"></div>
      </div>
      <span id="npBadge" class="badge">–</span>
    </div>
    <div class="np-controls">
      <button id="prevBtn" aria-label="Previous">⏮</button>
      <button id="playPauseBtn" aria-label="Play/Pause">▶️</button>
      <button id="nextBtn" aria-label="Next">⏭</button>
      <input id="seek" type="range" min="0" max="100" value="0" aria-label="Seek">
    </div>
    <audio id="audio" crossorigin="anonymous"></audio>
  </footer>

  <!-- Config injected at build/deploy time -->
  <script id="config" type="application/json">
    {
      "audiusKey": "922e6edcae9856000bf6814a1ee5745bfb57734",
      "scClientId": "YOUR_SOUNDCLOUD_CLIENT_ID",
      "scRedirectUri": "https://your.app/callback",
      "mrflens": { "audiusHandle": "Mr.FLEN", "soundcloudUsername": "mr-flen" },
      "analytics": { "likes": 0, "reposts": 0, "followers": 0 }
    }
  </script>
  <script src="sort-tracks.js"></script>
  <script src="app.js" defer></script>
</body>
</html>
